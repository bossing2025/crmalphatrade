{
  "permissions": {
    "allow": [
      "Bash(supabase --version:*)",
      "Bash(docker:*)",
      "Bash(supabase status:*)",
      "Bash(supabase start:*)",
      "Bash(psql:*)",
      "Bash(systemctl status:*)",
      "Bash(pg_ctl status:*)",
      "Bash(sudo usermod:*)",
      "Bash(npm run build:*)",
      "Bash(npm install)",
      "Bash(ls:*)",
      "Bash(chmod:*)",
      "Bash(node generate-jwt.js:*)",
      "Bash(node:*)",
      "Bash(test-env.mjs << 'EOF'\nimport { loadEnv } from 'vite';\nconst env = loadEnv\\('production', process.cwd\\(\\), ''\\);\nconsole.log\\('VITE_SUPABASE_URL:', env.VITE_SUPABASE_URL\\);\nconsole.log\\('VITE_SUPABASE_PUBLISHABLE_KEY:', env.VITE_SUPABASE_PUBLISHABLE_KEY\\);\nEOF)",
      "Bash(VITE_SUPABASE_URL=http://127.0.0.1:8000 VITE_SUPABASE_PUBLISHABLE_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxvY2FsaG9zdCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNzcwOTYzMzQzLCJleHAiOjIwODYzMjMzNDN9.BC3F--BtM1x6ZEjFqyuB1Mc7cvtyBxwQVyjLLVDxdjY\" npm run build:*)",
      "Bash(.env << 'ENVEOF'\nVITE_SUPABASE_URL=http://127.0.0.1:8000\nVITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxvY2FsaG9zdCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNzcwOTYzMzQzLCJleHAiOjIwODYzMjMzNDN9.BC3F--BtM1x6ZEjFqyuB1Mc7cvtyBxwQVyjLLVDxdjY\nENVEOF)",
      "Bash(vite.config.temp.ts << 'EOF'\nimport { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react-swc\";\nimport path from \"path\";\n\nexport default defineConfig\\({\n  server: {\n    host: \"::\",\n    port: 8080,\n  },\n  plugins: [react\\(\\)],\n  resolve: {\n    alias: {\n      \"@\": path.resolve\\(__dirname, \"./src\"\\),\n    },\n  },\n  define: {\n    'import.meta.env.VITE_SUPABASE_URL': JSON.stringify\\('http://127.0.0.1:8000'\\),\n    'import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY': JSON.stringify\\('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxvY2FsaG9zdCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNzcwOTYzMzQzLCJleHAiOjIwODYzMjMzNDN9.BC3F--BtM1x6ZEjFqyuB1Mc7cvtyBxwQVyjLLVDxdjY'\\),\n  },\n}\\);\nEOF)",
      "Bash(strings:*)",
      "Bash(firewall-cmd:*)",
      "Bash(iptables:*)",
      "Bash(curl:*)",
      "Bash(.htaccess << 'EOF'\n# Disable all caching\n<FilesMatch \"\\\\.\\(html|js|css\\)$\">\n    FileETag None\n    Header unset ETag\n    Header set Cache-Control \"max-age=0, no-cache, no-store, must-revalidate\"\n    Header set Pragma \"no-cache\"\n    Header set Expires \"Wed, 11 Jan 1984 05:00:00 GMT\"\n</FilesMatch>\n\n# React SPA routing configuration\n<IfModule mod_rewrite.c>\n  RewriteEngine On\n  RewriteBase /\n\n  # Don't rewrite files or directories\n  RewriteCond %{REQUEST_FILENAME} !-f\n  RewriteCond %{REQUEST_FILENAME} !-d\n\n  # Rewrite all other URLs to index.html\n  RewriteRule ^ index.html [L]\n</IfModule>\n\n# Enable GZIP compression\n<IfModule mod_deflate.c>\n  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json\n</IfModule>\n\n# Set proper MIME types\n<IfModule mod_mime.c>\n  AddType application/javascript .js\n  AddType text/css .css\n</IfModule>\nEOF)",
      "Bash(sudo dpkg:*)",
      "Bash(cloudflared --version:*)",
      "Bash(pkill:*)",
      "Bash(nginx:*)",
      "Bash(httpd:*)",
      "Bash(ss:*)",
      "Bash(apachectl configtest:*)",
      "Bash(journalctl:*)",
      "Bash(grep:*)",
      "Bash(/tmp/api-supabase.conf << 'EOF'\n<VirtualHost *:80>\n    ServerName api.alphatradecrm.com\n    \n    # For certbot challenge\n    DocumentRoot /var/www/html\n    \n    # Proxy to Supabase\n    ProxyPreserveHost On\n    ProxyPass /.well-known/ !\n    ProxyPass / http://localhost:8000/\n    ProxyPassReverse / http://localhost:8000/\n    \n    ErrorLog /var/log/apache2/api-supabase-error.log\n    CustomLog /var/log/apache2/api-supabase-access.log combined\n</VirtualHost>\nEOF)",
      "Bash(/tmp/api-supabase-ssl.conf << 'EOF'\n<VirtualHost *:443>\n    ServerName api.alphatradecrm.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/api.alphatradecrm.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/api.alphatradecrm.com/privkey.pem\n    \n    # Proxy to Supabase\n    ProxyPreserveHost On\n    ProxyPass / http://localhost:8000/\n    ProxyPassReverse / http://localhost:8000/\n    \n    ErrorLog /var/log/apache2/api-supabase-ssl-error.log\n    CustomLog /var/log/apache2/api-supabase-ssl-access.log combined\n</VirtualHost>\n\n# Redirect HTTP to HTTPS\n<VirtualHost *:80>\n    ServerName api.alphatradecrm.com\n    Redirect permanent / https://api.alphatradecrm.com/\n</VirtualHost>\nEOF)",
      "Bash(openssl x509:*)",
      "Bash(dig:*)",
      "Bash(apachectl -S:*)",
      "Bash(/tmp/api-supabase-ssl.conf << 'EOF'\n<VirtualHost *:443>\n    ServerName api.alphatradecrm.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/api.alphatradecrm.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/api.alphatradecrm.com/privkey.pem\n    \n    # CORS Headers\n    Header always set Access-Control-Allow-Origin \"*\"\n    Header always set Access-Control-Allow-Methods \"GET, POST, PUT, PATCH, DELETE, OPTIONS\"\n    Header always set Access-Control-Allow-Headers \"Origin, X-Requested-With, Content-Type, Accept, Authorization, apikey, x-client-info\"\n    Header always set Access-Control-Expose-Headers \"Content-Range, X-Content-Range\"\n    Header always set Access-Control-Max-Age \"3600\"\n    \n    # Handle preflight OPTIONS requests\n    RewriteEngine On\n    RewriteCond %{REQUEST_METHOD} OPTIONS\n    RewriteRule ^\\(.*\\)$ $1 [R=200,L]\n    \n    # Proxy to Supabase\n    ProxyPreserveHost On\n    ProxyPass / http://localhost:8000/\n    ProxyPassReverse / http://localhost:8000/\n    \n    ErrorLog /var/log/apache2/api-supabase-ssl-error.log\n    CustomLog /var/log/apache2/api-supabase-ssl-access.log combined\n</VirtualHost>\n\n# Redirect HTTP to HTTPS\n<VirtualHost *:80>\n    ServerName api.alphatradecrm.com\n    Redirect permanent / https://api.alphatradecrm.com/\n</VirtualHost>\nEOF)",
      "Bash(sudo cat:*)",
      "Bash(/tmp/api-supabase-new.conf << 'EOF'\n<VirtualHost *:443>\n    ServerName api.alphatradecrm.com\n\n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/api.alphatradecrm.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/api.alphatradecrm.com/privkey.pem\n\n    # Proxy to Supabase - pass everything including OPTIONS\n    ProxyPreserveHost Off\n    ProxyPass / http://localhost:8000/\n    ProxyPassReverse / http://localhost:8000/\n\n    # Don't interfere with headers from backend\n    ProxyAddHeaders Off\n\n    ErrorLog /var/log/apache2/api-supabase-ssl-error.log\n    CustomLog /var/log/apache2/api-supabase-ssl-access.log combined\n</VirtualHost>\n\n# HTTP VirtualHost - for Cloudflare Workers origin fetch\n<VirtualHost *:80>\n    ServerName api.alphatradecrm.com\n\n    # Proxy to Supabase on HTTP too\n    ProxyPreserveHost Off\n    ProxyPass / http://localhost:8000/\n    ProxyPassReverse / http://localhost:8000/\n    ProxyAddHeaders Off\n\n    ErrorLog /var/log/apache2/api-supabase-http-error.log\n    CustomLog /var/log/apache2/api-supabase-http-access.log combined\n</VirtualHost>\nEOF)",
      "Read(//opt/megatroncrm/supabase/docker/**)",
      "Bash(xxd:*)",
      "Bash(ANON_KEY=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlbGYtaG9zdGVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxNTYwMDAsImV4cCI6MTkyNzkyMjQwMH0.An-Bi2dl7klEgFbxauShnjÐ¾VJedhotV_Dw_jtsgGwKc\":*)",
      "Bash(/tmp/decode_jwt.py:*)",
      "Read(//home/crmalphatradecrm/public_html/**)"
    ],
    "additionalDirectories": [
      "/tmp"
    ]
  }
}
